@using SchoolBones
@using SchoolBones.DataStructs
@using SchoolBones.Enums
@using SchoolBones.Common

@{
    string strCommonNavigation = "";
    DoubleInt oInputs = null;

    oInputs = Model;
    Modules eModules = (Modules)oInputs.Id;
    SubModule eSubModule = (SubModule)(oInputs.Value);

    Array arrModules = Enum.GetValues(typeof(Modules));
    strCommonNavigation = string.Format("{0}/{1}", eModules, eSubModule);
}

@*<script src="~/Scripts/Admin/RibbonControlAdmin.js"></script>*@

<div class="Navigation">
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <span class="navbar-brand">@strCommonNavigation</span>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#CommonNavigation" aria-controls="CommonNavigation" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="CommonNavigation" style="background-color: aliceblue;">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    @{
                        if (eModules == Modules.Admin)
                        {
                            if (eSubModule == SubModule.AddTeacher)
                            {
                                <li class="nav-item">
                                    <a class="nav-link active" onclick="COMMONMETHODS.FillUserDetails()" href="#">Fill Teacher Details</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.TimeTable)
                            {
                                <li class="nav-item">
                                    <a class="nav-link active" onclick="RIBBONCONTROLADMIN.UpdateTimeTable()" href="#">Update</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.ActiveTeachers)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLADMIN.DoActiveInActiveTeacher(false);" href="#">Do In-Active</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.RefreshTeacherData('tblTeacherDetail');" href="#">Refresh</a>
                                </li>
                                <li class="nav-item">
                                    <input id="txtSearchStudent" class="form-control me-2" type="search" placeholder="Search student name" aria-label="Search" onkeyup="ADMINCOMMONJS.searchTeacher('tblTeacherDetail')" />
                                </li>
                            }
                            else if (eSubModule == SubModule.InActiveTeachers)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLADMIN.DoActiveInActiveTeacher(true)" href="#">Do Active</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.RefreshTeacherData('tblTeacherDetail');" href="#">Refresh</a>
                                </li>
                                <li class="nav-item">
                                    <input id="txtSearchStudent" class="form-control me-2" type="search" placeholder="Search student name" aria-label="Search" onkeyup="ADMINCOMMONJS.searchTeacher('tblTeacherDetail')" />
                                </li>
                            }
                            else if (eSubModule == SubModule.IDCardOfTeachers)
                            {

                            }
                            else if (eSubModule == SubModule.IDCardOfStudents)
                            {

                            }
                            else if (eSubModule == SubModule.TakeTeacherAttendanceInputs)
                            {

                            }
                            else if (eSubModule == SubModule.LoadTeacherAttendanceInputs)
                            {

                            }
                            else if (eSubModule == SubModule.Registration)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.DeleteRegistration();" href="#">Delete Registration</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.LoadRegUserRefresh();" href="#">Refresh</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.AllTeachers)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.RefreshTeacherData('tblTeacherDetail');" href="#">Refresh</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.DeleteTeacher(false);" href="#">Delete Teacher Temporary</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.DeleteTeacher(true);" href="#">Delete Teachers Permanent</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ADMINCOMMONJS.EditTeacher();" href="#">Edit Teacher</a>
                                </li>
                                <li class="nav-item">
                                    <input id="txtSearchTeacher" class="form-control me-2" type="search" placeholder="Search teacher name" aria-label="Search" onkeyup="ADMINCOMMONJS.searchTeacher('tblTeacherDetail')" />
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="TEACHERCOMMONJS.Close();" href="#">Back</a>
                                </li>
                            }
                        }
                        else if (eModules == Modules.Teacher)
                        {
                            if (eSubModule == SubModule.AddStudent)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONMETHODS.FillUserDetails()" href="#">Fill Student Details</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.AllStudents)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="TEACHERCOMMONJS.RefreshStudentData('tblStudentDetail');" href="#">Refresh</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.DeleteStudent(false);" href="#">Delete Student Temporary</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.DeleteStudent(true);" href="#">Delete Student Permanent</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.EditStudent();" href="#">Edit Student</a>
                                </li>
                                <li class="nav-item">
                                    <input id="txtSearchStudent" class="form-control me-2" type="search" placeholder="Search student name" aria-label="Search" onkeyup="TEACHERCOMMONJS.searchStudent('tblStudentDetail')" />
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="TEACHERCOMMONJS.Close();">Back</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.ActiveStudent)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.DoActiveInActiveStudent(false)" href="#">Do In-Active</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.InActiveStudent)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.DoActiveInActiveStudent(true)" href="#">Do Active</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.TakeAttendanceInputs)
                            {
                                <li class="nav-item">
                                </li>
                            }
                            else if (eSubModule == SubModule.LoadAttendanceInputs)
                            {
                                <li class="nav-item">
                                </li>
                            }
                            else if (eSubModule == SubModule.CreateMarksheet)
                            {
                                <li class="nav-item">
                                </li>
                            }
                            else if (eSubModule == SubModule.CreateDMarksheet)
                            {
                                <li class="nav-item">
                                </li>
                            }
                            else if (eSubModule == SubModule.AddSubjects)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.AddSubject(this)" href="#">Add Subject</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.DeleteSubject(this)" href="#">Delete Subject</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="RIBBONCONTROLTEACHER.UpdateSubject(this)" href="#">Update Subject</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.DefinedMaximumMarks)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="SaveMaxMarks()" href="#">Save</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="TEACHERCOMMONJS.RefreshStudentData('tblStudentDetail');" href="#">Refresh</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.DisplayMarksheet)
                            {

                            }
                            else if (eSubModule == SubModule.Registration)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.DeleteRegistration();" href="#">Delete Registration</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.LoadRegUserRefresh();" href="#">Refresh</a>
                                </li>
                            }
                        }
                        else if (eModules == Modules.Student)
                        {

                        }
                        else if (eModules == Modules.Accounts)
                        {
                            if (eSubModule == SubModule.FeeSubmission)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONMETHODS.LoadFeeDetails()" href="#">Load Fee Details</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.ClasswiseStudents)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ACCOUNTSERVER.LoadClasswiseStudents()" href="#">Load Classwise Students</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.FeesStructure)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.CallCommonPopup(1)" href="#">Add</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.CallCommonPopup(2)" href="#">Update</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" onclick="COMMONRIBBON.CallCommonPopup(3)" href="#">Delete</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.DefineMontlySalary)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ACCOUNTSERVER.SaveSalary()" href="#">Update</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.LoadSalary)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ACCOUNTSERVER.LoadSalaryDetails()" href="#">Load</a>
                                </li>
                            }
                            else if (eSubModule == SubModule.LoadFeeCollection)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" onclick="ACCOUNTSERVER.LoadFeeCollection()" href="#">Load Fee Collection</a>
                                </li>
                            }
                        }





                        if (eSubModule == SubModule.AddMenu)
                        {
                            <li class="nav-item">
                                <a class="nav-link active" onclick="RIBBONCONTROLADMIN.ToExcel(this)" href="#">To Excel</a>
                            </li>
                            <li class="nav-item">
                                    @*FillterMenu*@
                                    <ul class="navbar-nav">
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle" onclick="RIBBONCONTROLADMIN.ToggleSubModule()">
                                                Admin
                                            </a>
                                            <ul class="dropdown-menu dropdown-menu-dark" id="ulModule" style="display:none;">
                                                @if (arrModules != null)
                                                {
                                                    for (int i = 0; i < arrModules.Length; i++)
                                                    {
                                                        <li onclick="RIBBONCONTROLADMIN.FilterMenu(this)" id="@Convert.ToString(arrModules.GetValue(i))">
                                                            <a class="dropdown-item" href="#">@Convert.ToString(arrModules.GetValue(i))</a>
                                                        </li>
                                                    }
                                                }
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                        }
                    }
                </ul>

                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                </form>
            </div>
        </div>
    </nav>
</div>
<hr />



<script>
    function SaveMaxMarks() {
        debugger;
        url = "@Url.Action("SaveDefinedMaximumMarks", "Teacher")";

        $.ajax({
            url: url,
            cache: false,
            type: "Post",
            dataType: "json",
            data: {
                arrSubjectMaxMarks: GetDefinedMarks()
            },
            success: function (data) {
                COMMONMETHODS.SaveStatus(true, data);
            }
        });
    }
    function GetDefinedMarks() {
        debugger
        var arrSubjectMaxMarks = [];
        SubjectMaxMarks = {};

        var iClass= parseInt(document.getElementById("hdnClass").value);
        var tBody = document.getElementById("tbodyMaxMarks");
        var tableRows = tBody.children;

        for (var iRow = 0; iRow < tableRows.length; iRow++) {
            SubjectMaxMarks = {}
            tr = tableRows[iRow];
            SubjectMaxMarks.SubjectId = parseInt(tr.children[0].id);
            SubjectMaxMarks.Class = iClass;
            SubjectMaxMarks.MaxMark = parseInt(tr.children[1].children[0].value);
            arrSubjectMaxMarks.push(SubjectMaxMarks);
        }
        return arrSubjectMaxMarks;
    }
</script>